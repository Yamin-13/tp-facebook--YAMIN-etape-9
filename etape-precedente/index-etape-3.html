<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP-Facebook-Etape-2</title>
    <!-- <link rel="stylesheet" href="./assset/css/style.css"> -->
</head>
<!-- liens image pour le prompt : ./assset/css/img/maldives3.webp
                                : ./assset/css/img/field-flower.jpg  -->

<body>
    <header>
        <h1>Low Book</h1>
    </header>
    <div class="buttonAdd">
        <button>Add a post</button>
        <script>
            // Etape 3----------------------------------------------------------------------------------------

            let article = [];
            let button = document.querySelector('button');

            button.addEventListener('click', function () {
                // CREATION D UN OBJET
                let post = {
                    author: prompt("Merci d'entrer votre prénom"),
                    emotion: prompt("Merci d'entrer votre message"),
                    url: prompt("Merci d'entrer l'url de votre image")
                };
                // pour ajouter le post au tableau
                article.push(post);
                console.log(article);
                for (let i of article) {
                    let article = document.createElement("article");
                    article.className = "janeDoe";

                    let closeDiv = document.createElement("div");
                    closeDiv.addEventListener('click', function(supprimer) {
                        supprimer.target.parentNode.parentNode.remove();
                    });

                    closeDiv.className = "close";

                    let horizontalDiv = document.createElement("div");
                    horizontalDiv.className = "horizontal";

                    let verticalDiv = document.createElement("div");
                    verticalDiv.className = "vertical";

                    closeDiv.appendChild(horizontalDiv);
                    closeDiv.appendChild(verticalDiv);

                    let profilDiv = document.createElement("div");
                    profilDiv.className = "profil";

                    let teteDiv = document.createElement("div");
                    teteDiv.className = "tete";

                    let corpsDiv = document.createElement("div");
                    corpsDiv.className = "corps";

                    profilDiv.appendChild(teteDiv);
                    profilDiv.appendChild(corpsDiv);

                    let h2Element = document.createElement("h2");
                    if (i.author) {
                        console.log("je suis dans le if");
                        h2Element.textContent = "Posté par: " + i.author;
                    }
                    else {
                        h2Element.textContent = "Posté par: Anonyme";
                    }

                    let pElement = document.createElement("p");
                    pElement.textContent = i.emotion;

                    let imgElement = document.createElement("img");
                    imgElement.src = i.url;

                    article.appendChild(closeDiv);
                    article.appendChild(profilDiv);
                    article.appendChild(h2Element);
                    article.appendChild(pElement);
                    article.appendChild(imgElement);

                    document.body.appendChild(article);


                }
                article = [];
            });
        </script>
    </div>
</body>

</html>